# Приложение для выгрузки видео из комментариев wildberries

## Описание
* При запуске приложения открывается окно браузера.   
* В этом окне пользователь может открыть товар на wildberries и перейти в его описание  
* Если в открыть комментарий с прикрепленным видео и нажать F4, 
видео скачается в по указанному пути из переменных окружения


## Основные технологии
**selenium** - Для открытия окна браузера и скраппинга страницы \
**asyncio** - для асинхронного скачивания сегментов видео \
**pynput** - для отслеживания нажатия клавиши F4 скачивание


## Установка

1. Python 3.12
2. Создать виртуальное окружение `python -m venv ./.venv`
3. Активировать виртуальное окружение `source .venv/bin/activate`
4. Установить зависимости `pip install -r requirements.txt`
5. Установить Google Chrome
6. Установить ffmpeg

## Переменные окружения
* DEBUG - будут ли логироваться все нажатия клавиш
* DOWNLOADING_ROOT_PATH - путь, куда будут выгружаться видосы (для надежности стоит прописать полный путь)

## Запуск

* Создать в ./settings файл ./settings/env, где прописать переменные окружения
* После создания виртуального окружения и установки в него зависимостей запустить скрипт ./main.py
* В открывшимся браузере открыть отзыв с видео
* нажать F4
* после окончания скачивания видео в формате .mp4 будет лежать в папке указанной в env фаиле

## Особенности

* Если открыть вкладку "Фото и видео покупателей" и нажать F4 - качаются все подгруженные на 
странице видео

* Если пролистывать отзывы не выходя из "приближенного" режима - подгруженные тэги видео будут 
оставаться в html коде и при нажатии F4 будут скачаны все видео, которых еще нет в папке    

* Если видео с uuid из атрибута превью уже существует в итоговой папке - оно не скачивается

## Баги

* Замечено, что иногда скачивание сегментов может зависнуть без возникновения ошибки. 
В таком случае временная папка не будет удалена


## Потенциальные улучшения

* Автоматический выбор драйвера под установленный браузер
* Асинхронное скачивание сегментов
* Лимит на количество одновременных загрузок


##### Разработчик
Тропин Федор \
tg: **@fedorTrop**
